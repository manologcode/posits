var LoadSaveFiles = {

  download:function(){
    dataEnd =`

    /* ------------------------------------------------------------------------------
    este archivo ha sido generado por la aplicaci√≥n line de post-its de la web creawww
    para ver su contenido entra en https://creawww.com/post-it/ y cargalo

    this file has been generated by the application post-its line of the web creawww
    to see its content go to https://creawww.com/post-it/ and upload it
    */`

    name = canvaspostit[canvasActive].title+".crea.txt"
    file = JSON.stringify(canvaspostit[canvasActive]) +
    "\n"+JSON.stringify( Board.sizeScreen() )+ dataEnd
    LoadSaveFiles.saveTextAsFile(name,file)
  },

  saveTextAsFile : function(fileNameToSaveAs,textToSave){
    var textToSaveAsBlob = new Blob([textToSave], {type:"text/plain"});
    var textToSaveAsURL = window.URL.createObjectURL(textToSaveAsBlob);

    var downloadLink = document.createElement("a");
    downloadLink.download = fileNameToSaveAs;
    downloadLink.innerHTML = "Download File";
    downloadLink.href = textToSaveAsURL;
    downloadLink.onclick = LoadSaveFiles.destroyClickedElement;
    downloadLink.style.display = "none";
    document.body.appendChild(downloadLink);

    downloadLink.click();
  },

  destroyClickedElement : function(event){
    document.body.removeChild(event.target);
  },

  inputLoadFile : function(){
    var filetxt = document.getElementById('buttonFileToLoad').files[0]
    LoadSaveFiles.loadFileAsText(filetxt);
  },

  loadFileAsText : function(fileI){
    var textFromFileLoaded="";
    var fileReader = new FileReader();
    fileReader.onload = function(fileLoadedEvent) {
      textFileLoaded = fileLoadedEvent.target.result;
      LoadSaveFiles.resonseLoadFileAsText(textFileLoaded)
    }
    fileReader.readAsText(fileI, "UTF-8");
  },

  resonseLoadFileAsText : function(fileTxt){
    dataFile= JSON.parse( fileTxt.split("\n")[0] )
    sizeScreen= JSON.parse( fileTxt.split("\n")[1] )
    newProyect = Board.recalPositionPosits(sizeScreen,dataFile)
    canvaspostit.push(newProyect)
    Board.createListMenu();
    Board.update_localStorage()
    Board.loadCanvas()
  }
}
